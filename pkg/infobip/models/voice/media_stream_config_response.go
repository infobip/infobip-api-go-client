/*
Infobip Client API Libraries OpenAPI Specification

OpenAPI specification containing public endpoints supported in client API libraries.

Contact: support@infobip.com
*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

package voice

import (
	"encoding/json"
	"fmt"
)

// MediaStreamConfigResponse struct for MediaStreamConfigResponse
type MediaStreamConfigResponse struct {
	MediaStreamingConfigResponse    *MediaStreamingConfigResponse
	WebsocketEndpointConfigResponse *WebsocketEndpointConfigResponse
}

// MediaStreamingConfigResponseAsMediaStreamConfigResponse is a convenience function that returns MediaStreamingConfigResponse wrapped in MediaStreamConfigResponse
func MediaStreamingConfigResponseAsMediaStreamConfigResponse(v *MediaStreamingConfigResponse) MediaStreamConfigResponse {
	return MediaStreamConfigResponse{
		MediaStreamingConfigResponse: v,
	}
}

// WebsocketEndpointConfigResponseAsMediaStreamConfigResponse is a convenience function that returns WebsocketEndpointConfigResponse wrapped in MediaStreamConfigResponse
func WebsocketEndpointConfigResponseAsMediaStreamConfigResponse(v *WebsocketEndpointConfigResponse) MediaStreamConfigResponse {
	return MediaStreamConfigResponse{
		WebsocketEndpointConfigResponse: v,
	}
}

// Unmarshal JSON data into any of the pointers in the struct
func (dst *MediaStreamConfigResponse) UnmarshalJSON(data []byte) error {
	// use discriminator value to speed up the lookup
	var jsonDict map[string]interface{}
	err := json.Unmarshal(data, &jsonDict)
	if err != nil {
		return fmt.Errorf("Failed to unmarshal JSON into map for the discrimintor lookup.")
	}

	// check if the discriminator value is 'MEDIA_STREAMING'
	if jsonDict["type"] == "MEDIA_STREAMING" {
		// try to unmarshal JSON data into MediaStreamingConfigResponse
		err = json.Unmarshal(data, &dst.MediaStreamingConfigResponse)
		if err == nil {
			jsonMediaStreamingConfigResponse, _ := json.Marshal(dst.MediaStreamingConfigResponse)
			if string(jsonMediaStreamingConfigResponse) == "{}" { // empty struct
				dst.MediaStreamingConfigResponse = nil
			} else {
				return nil // data stored in dst.MediaStreamingConfigResponse, return on the first match
			}
		} else {
			dst.MediaStreamingConfigResponse = nil
		}
	}
	// check if the discriminator value is 'WEBSOCKET_ENDPOINT'
	if jsonDict["type"] == "WEBSOCKET_ENDPOINT" {
		// try to unmarshal JSON data into WebsocketEndpointConfigResponse
		err = json.Unmarshal(data, &dst.WebsocketEndpointConfigResponse)
		if err == nil {
			jsonWebsocketEndpointConfigResponse, _ := json.Marshal(dst.WebsocketEndpointConfigResponse)
			if string(jsonWebsocketEndpointConfigResponse) == "{}" { // empty struct
				dst.WebsocketEndpointConfigResponse = nil
			} else {
				return nil // data stored in dst.WebsocketEndpointConfigResponse, return on the first match
			}
		} else {
			dst.WebsocketEndpointConfigResponse = nil
		}
	}
	return fmt.Errorf("Data failed to match schemas in anyOf(MediaStreamConfigResponse)")
}

// Marshal data from the first non-nil pointers in the struct to JSON
func (src MediaStreamConfigResponse) MarshalJSON() ([]byte, error) {
	if src.MediaStreamingConfigResponse != nil {
		return json.Marshal(&src.MediaStreamingConfigResponse)
	}
	if src.WebsocketEndpointConfigResponse != nil {
		return json.Marshal(&src.WebsocketEndpointConfigResponse)
	}
	return nil, nil // no data in anyOf schemas
}

// Get the actual instance
func (obj *MediaStreamConfigResponse) GetActualInstance() interface{} {
	if obj == nil {
		return nil
	}
	if obj.MediaStreamingConfigResponse != nil {
		return obj.MediaStreamingConfigResponse
	}
	if obj.WebsocketEndpointConfigResponse != nil {
		return obj.WebsocketEndpointConfigResponse
	}
	// all schemas are nil
	return nil
}

type NullableMediaStreamConfigResponse struct {
	value *MediaStreamConfigResponse
	isSet bool
}

func (v NullableMediaStreamConfigResponse) Get() *MediaStreamConfigResponse {
	return v.value
}

func (v *NullableMediaStreamConfigResponse) Set(val *MediaStreamConfigResponse) {
	v.value = val
	v.isSet = true
}

func (v NullableMediaStreamConfigResponse) IsSet() bool {
	return v.isSet
}

func (v *NullableMediaStreamConfigResponse) Unset() {
	v.value = nil
	v.isSet = false
}

func NewNullableMediaStreamConfigResponse(val *MediaStreamConfigResponse) *NullableMediaStreamConfigResponse {
	return &NullableMediaStreamConfigResponse{value: val, isSet: true}
}

func (v NullableMediaStreamConfigResponse) MarshalJSON() ([]byte, error) {
	return json.Marshal(v.value)
}

func (v *NullableMediaStreamConfigResponse) UnmarshalJSON(src []byte) error {
	v.isSet = true
	return json.Unmarshal(src, &v.value)
}
